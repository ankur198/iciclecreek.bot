# match on any token with ___, you can name a wildcard slot by using (name:___)
# group alternate tokens together using '(' ')' and '|' ==> (token1|token2|token3)
# put quantifiers on any token grouping...
#   '?' ==> zero or one
#   '*' ==> zero or more
#   '+' ==> one or more
#   '#' ==> max number of tokens to consume
#   '~' ==> use fuzzy matching for the tokens in the group.
# Entities can be placed into a pattern with '@', creating a compound hierarchical result.
locale: en
externalEntities: []
macros:
  $quantity: a|an|some|@number
  $beverages: '@beer|@wine|@whiskey|@coffee'
entities:
  - name: '@name'
    patterns:
    - name is ___

# variations on words which will be captured as @container entitiy
  - name: '@container'
    patterns:
    - glass
    - shot
    - shotglass
    - tumbler
    - mug
    - pitcher
    - cup

# If you change the pattern to an array it will normalize to a first value in each array.
  - name: '@drinkSize'
    patterns:
    - [s, small, short]
    - [m, medium, tall]
    - [l, large, big]
    - [xl, extra large, venti, giant, (humungous)~]

  - name: '@drinkTemp'
    patterns: 
    - [cold, chilled, cool, icy, iced, freezing cold]
    - warm
    - [hot, heated, steaming, '(steaming|really)? hot']


# ---------- BEER
  - name: '@beerLabel'
    patterns:
    - coors
    - (heiniken)~
    - (corona)~
    - miller

  - name: '@beerStyle'
    patterns:
    - pilsner
    - [ipa, india pale, india pale ale]
    - ale
    - porter
    
  - name: '@beer'
    patterns:
    - (@drinkTemp|@container|@beerStyle|@beerLabel)+ (beer)?
    - ($quantity)? (of|@drinkTemp|@container|@beerStyle|@beerLabel|beerDescription:___)* beer (@beerLabel)*

# ---------- WINE
  - name: '@wineLabel'
    patterns:
    - house
    - big house
    - columbia crest

  - name: '@wineStyle'
    patterns:
    - red
    - white

  - name: '@wine'
    patterns:
    - '@wineLabel (wine|vino)?'
    - ($quantity)? (of|@wineStyle|wineDescription:___)* (wine|vino)

# ---------- WHISKY
  - name: '@whiskeyStyle'
    patterns:
    - neat
    - [ontherocks, on the rocks, on ice]
    - [water, splash of water]

  - name: '@whiskeyLabel'
    patterns:
    - clyde mills
    - bushmills
    - [makers mark, makers]
    - glenhaven

  - name: '@whiskey'
    patterns:
    - '(@whiskeyLabel|@whiskeyStyle) (whiskey|borboun)?~ (@whiskeyStyle)*'
    - ($quantity)? (of|@whiskeyStyle|whiskeyDescription:___)* (whiskey|borboun)~  (@whiskeyLabel|@whiskeyStyle)*

# ---------- COFFEE
  - name: '@coffeeStyle'
    patterns:
    - [french, french roast]
    - black
    - espresso
    - (cappucino)~
    - (latte)~

  - name: '@coffeeAdditives'
    patterns:
    - milk
    - [nondairycreamer, '(non-dairy|nondairy)? creamer']
    - [halfnhalf, half and half, half in half]
    - sugar
    
  - name: '@coffee'
    patterns:
    - (@coffeeStyle|@coffeeAdditives)* (coffee)? (with)? (@coffeeStyle|@coffeeAdditives)* (@conjunction @coffeeAdditives)*

# -------- DRINK ORDER

  - name: '@drinkOrder'
    patterns:
    - (a|an|some|@number)? (@drinkSize|@container|@drinkTemp)* (of)? (@drinkTemp)? (@beer|@whiskey|@wine|@coffee|beverage|drink)

  - name: '@drinkOrders'
    patterns:
    - '@drinkOrder (@conjunction|@drinkOrder)*'

  - name: '@desireIntent'
    patterns:
    - (like|like to|have|order|bring us|bring me) (@drinkOrders)+

# ------------ MISC
  - name: '@conjunction'
    patterns: 
    - or
    - and

